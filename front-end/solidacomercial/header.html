<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/solidacomercial/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        
    </style>
    <title>Document</title>
</head>
<body>
    <div class="header">
        <div class="header-grid">
            <div class="logo-box">
                <a href="../../index.html">
                    <img class="logo" src="../img/iconos/ICONO CON PUNTOS.png" alt="">
                </a>
            </div>
            <div class="containerGrid">
                <div style="position: relative;">
                    <input type="text" class="busqueda tittles" name="search" placeholder="buscar productos">
                </div>
                <div class="conttt">
                    <img class="carrito" src="../img/iconos/carrito.png" alt="">
                </div>
                <div class="wish-list">
                    <div class="exs">
                        <i id="cerrar" class="fa-solid fa-xmark fa-2x"></i>
                    </div>
                    <div id="shoping">
                    
                    </div>
                    <div id="totalcontainer">
                        <p>total: <span id="total-precio"></span></p>
                    </div>
                </div>
                <script>
                    const carrito = document.querySelector(".conttt");
                    const wishList = document.querySelector(".wish-list");
                    const cerrar = document.getElementById("cerrar");
                    carrito.addEventListener("click", () => {
                        carrito.classList.toggle("active");
                        wishList.classList.toggle("active");
                    });
                    cerrar.addEventListener("click", () => {
                        cerrar.classList.toggle("active");
                        wishList.classList.toggle("active");
                    })
                </script>
            </div>
        </div>
        <nav class="nav2">
            <ul class="listas">
                <li class="relative-menu">
                    <a href="">Imprenta</a>
                    <ul class="hiden-menu">
                        <div class="columns">
                            <div>
                                <li><a href=""><h3 class="tittles">Papeleria Comercial</h3></a></li>
                                
                                <li><a href="productos.php">Remito</a></li>
                                <li><a href="">Tarjetas Personalizadas</a></li>
                                <li><a href="">Tacos</a></li>
                                <li><a href="">Carpetas de presentación</a></li>
                                <li><a href="">Hojas de membersias</a></li>
                                <li><a href="">Recetarrios / Talonarios</a></li>
                            </div>
                            <div>
                                <li><a href=""><h3 class="tittles">Sobres</h3></a></li>
                                
                                <li><a href="">sobres con tu logo</a></li>
                                <li><a href="">sobre porta tarjeta</a></li>
                                <li><a href="">sobre largo</a></li>
                                <li><a href="">sobre tipo bolsa</a></li>
                            </div>
                        </div>
                        <div class="columns">
                            <div>
                                <li><a href=""><h3 class="tittles">Folleteria</h3></a></li>
                                
                                <li><a href="">volantes</a></li>
                                <li><a href="">Dipticos</a></li>
                                <li><a href="">Tripticos</a></li>
                                <li><a href="">Cuadripticos</a></li>
                                <li><a href="">Cuadripticos Extralargos</a></li>
                            </div>
                            <div>
                                <li><a href=""><h3 class="tittles">Gremio Gráfico</h3></a></li>
                                
                                <li><a href="">Bajadas XL</a></li>
                                <li><a href="">Bajadas Láser</a></li>
                                <li><a href="">Bajadas Offset</a></li>
                                <li><a href="">Estampado DTF</a></li>
                                <li><a href="">Impresipon DTF textil por metro</a></li>
                                <li><a href="">Impresión lona, vinilo, papel y tela</a></li>
                                <!-- <li><a href="">Estampado DTF</a></li> -->
                            </div>
                        </div>
                    </ul>
                </li>
                <li class="relative-menu">Carteleria</li>
                <li class="relative-menu">Cajas y Bolsas</li>
                <li class="relative-menu">Merchandising</li>
                <li class="relative-menu">Ideas</li>
                <li class="relative-menu">Deco & Gift</li>
                <li class="relative-menu">Cotizacion a Medida</li>
            </ul>
        </nav>

    </div>
    <script>
        let total = 0;
    
        function agregarAlCarrito(producto, tamañoR, tipoR, tipoC, tipoE, cantidad) {
            const carritoItems = document.getElementById('shoping');
            const item = document.createElement('div');
            item.className = 'carrito-item';
            const itemPrecio = 10 * cantidad;  // Aquí asumes un precio fijo de 10, asegúrate de ajustarlo si es necesario
            item.innerHTML = `
                ${producto} - Cantidad: ${cantidad}, Tamaño: ${tamañoR}, Tipo Remito: ${tipoR}, Tipo Copias: ${tipoC}, Tipo Encuadernado: ${tipoE}, Cantidad: ${cantidad}
                <button class="btn-eliminar">Eliminar</button>    
            `;
            
            carritoItems.appendChild(item);
            total += itemPrecio;
            document.getElementById('total-precio').textContent = total;
    
            // Guardar en localStorage
            let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.push({
                producto,
                tamañoR,
                tipoR,
                tipoC,
                tipoE,
                cantidad,
                precio: itemPrecio
            });
            localStorage.setItem('carrito', JSON.stringify(carrito));
    
            const btnEliminar = item.querySelector('.btn-eliminar');
            btnEliminar.addEventListener('click', () => eliminarDelCarrito(item, itemPrecio));
        }
    
        function eliminarDelCarrito(item, precio) {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            const productoIndex = Array.from(item.parentNode.children).indexOf(item);
            carrito.splice(productoIndex, 1);  // Aquí corregí el segundo argumento para eliminar 1 elemento
            localStorage.setItem('carrito', JSON.stringify(carrito));
    
            item.remove();
            total -= precio;
            document.getElementById('total-precio').textContent = total;
        }
    
        document.addEventListener('DOMContentLoaded', function () {
            const carritoItems = document.getElementById('shoping');
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.forEach(item => {
                const div = document.createElement('div');
                div.className = 'carrito-item';
                div.innerHTML = `
                    ${item.producto} - Cantidad: ${item.cantidad}, Tamaño: ${item.tamañoR}, Tipo Remito: ${item.tipoR}, Tipo Copias: ${item.tipoC}, Tipo Encuadernado: ${item.tipoE}, Cantidad: ${item.cantidad}
                    <button class="btn-eliminar">Eliminar</button>    
                `;
                carritoItems.appendChild(div);
                total += item.precio;
    
                const btnEliminar = div.querySelector('.btn-eliminar');
                btnEliminar.addEventListener('click', () => eliminarDelCarrito(div, item.precio));
            });
            document.getElementById('total-precio').textContent = total;
        });
    </script>
    
</body>
</html>